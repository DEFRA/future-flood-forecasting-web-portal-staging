<?xml version="1.0" encoding="UTF-8"?> 
<databaseChangeLog 
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd"> 
  <changeSet author="pwadmore" id="changelog-alter-timeseries-job-job-status-time-type-to-datetimeoffset">
	  <sql>
      IF (NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='timeseries_job'AND COLUMN_NAME = 'job_status_time' AND DATA_TYPE = 'datetimeoffset'))
        ALTER TABLE ${fffsWebPortalStagingDbReportingSchema}.timeseries_job
          ALTER COLUMN job_status_time datetimeoffset
      </sql>
	  <rollback>
		  <sql>
          IF (EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='timeseries_job'AND COLUMN_NAME = 'job_status_time' AND DATA_TYPE = 'datetimeoffset'))
            ALTER TABLE ${fffsWebPortalStagingDbReportingSchema}.timeseries_job
              ALTER COLUMN job_status_time datetime2
      </sql>
	  </rollback>
  </changeSet>
</databaseChangeLog> 
